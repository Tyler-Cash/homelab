app-template:
  controllers:
    main:
      containers:
        main:
          image:
            repository: ghcr.io/tyler-cash/tyler-bot-backend
            tag: latest@sha256:6a953bc9419f053f2a3d07283b3e8495debabd84c95e2b41c7d612540840d7f4
          env:
            TZ: Australia/Sydney
            SPRING_CONFIG_ADDITIONAL-LOCATION: &secret_folder /secrets/config/
            SPRING_PROFILES_ACTIVE: prod

  service:
    main:
      type: LoadBalancer
      controller: main
      ports:
        http:
          port: 8080

  persistence:
    storage:
      enabled: true
      storageClass: ceph-block
      accessMode: ReadWriteOnce
      size: 5Gi
    secrets:
      enabled: true
      type: secret
      name: tylerbot-secrets
      globalMounts:
        - path: *secret_folder

  resources:
    requests:
      cpu: 50m
      memory: 1Gi
    limits:
      memory: 2Gi
